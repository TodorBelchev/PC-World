(self.webpackChunkpc_world=self.webpackChunkpc_world||[]).push([[782],{5782:(e,r,t)=>{"use strict";t.r(r),t.d(r,{AuthModule:()=>S});var i=t(1116),n=t(6687),o=t(1462),s=t(5806),l=t(878),a=t(509),u=t(9996);function g(e){return r=>(0,l.of)({}).pipe((0,a.g)(1e3),(0,u.U)(()=>r.value.length>=e?null:{minLength:!0}))}var d=t(6068),p=t(5366),c=t(9878),m=t(8845),h=t(3751),f=t(229);function v(e,r){1&e&&p._UZ(0,"app-spinner")}function b(e,r){1&e&&(p.TgZ(0,"div",12),p._uU(1," Email is required! "),p.qZA())}function w(e,r){1&e&&(p.TgZ(0,"div",12),p._uU(1," Email is invalid! "),p.qZA())}function x(e,r){1&e&&(p.TgZ(0,"div",12),p._uU(1," Password is required! "),p.qZA())}function _(e,r){1&e&&(p.TgZ(0,"div",12),p._uU(1," Password must be at least 8 characters long! "),p.qZA())}function P(e,r){if(1&e){const e=p.EpF();p.TgZ(0,"app-notification",13),p.NdJ("closeNotification",function(){return p.CHM(e),p.oxw(2).onCloseNotification()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("message",e.error)("type","error")}}function F(e,r){if(1&e){const e=p.EpF();p.TgZ(0,"form",6),p.NdJ("ngSubmit",function(){return p.CHM(e),p.oxw().onSubmit()}),p._UZ(1,"input",7),p.YNc(2,b,2,0,"div",8),p.YNc(3,w,2,0,"div",8),p._UZ(4,"input",9),p.YNc(5,x,2,0,"div",8),p.YNc(6,_,2,0,"div",8),p.YNc(7,P,1,2,"app-notification",10),p._UZ(8,"input",11),p.qZA()}if(2&e){const e=p.oxw();let r,t,i,n;p.Q6J("formGroup",e.loginForm),p.xp6(2),p.Q6J("ngIf",((null==(r=e.loginForm.get("email"))?null:r.touched)||(null==(r=e.loginForm.get("email"))?null:r.dirty))&&(null==(r=e.loginForm.get("email"))||null==r.errors?null:r.errors.required)),p.xp6(1),p.Q6J("ngIf",null==(t=e.loginForm.get("email"))||null==t.errors?null:t.errors.invalidEmail),p.xp6(2),p.Q6J("ngIf",((null==(i=e.loginForm.get("password"))?null:i.touched)||(null==(i=e.loginForm.get("password"))?null:i.dirty))&&(null==(i=e.loginForm.get("password"))||null==i.errors?null:i.errors.required)),p.xp6(1),p.Q6J("ngIf",((null==(n=e.loginForm.get("password"))?null:n.touched)||(null==(n=e.loginForm.get("password"))?null:n.dirty))&&(null==(n=e.loginForm.get("password"))||null==n.errors?null:n.errors.minLength)),p.xp6(1),p.Q6J("ngIf",0!==e.error.length),p.xp6(1),p.Q6J("disabled",e.loginForm.pending)}}let Z=(()=>{class e{constructor(e,r,t,i){this.fb=e,this.store=r,this.authService=t,this.router=i,this.error="",this.isLoading=!1,this.loginForm=this.fb.group({email:["",[o.kI.required],(0,s.c)()],password:["",[o.kI.required],g(8)]})}ngOnInit(){}onSubmit(){var e,r,t,i;if(this.loginForm.invalid||this.loginForm.pending){let n="";return(null===(e=this.loginForm.get("email"))||void 0===e?void 0:e.hasError("required"))&&(n+="Email is required."),(null===(r=this.loginForm.get("email"))||void 0===r?void 0:r.hasError("invalidEmail"))&&(n+="\nInvalid email."),(null===(t=this.loginForm.get("password"))||void 0===t?void 0:t.hasError("required"))&&(n+="\nPassword is required."),(null===(i=this.loginForm.get("password"))||void 0===i?void 0:i.hasError("minLength"))&&(n+="\nPassword must be at least 8 characters!"),void(this.error=n)}const n=this.loginForm.value.email,o=this.loginForm.value.password;this.isLoading=!0,this.authService.login({email:n,password:o}).subscribe(e=>{this.store.dispatch((0,d.zU)({_id:e._id,city:e.city||"",email:e.email,isAdmin:e.isAdmin,location:e.location||"",firstName:e.firstName||"",lastName:e.lastName||"",phoneNumber:e.phoneNumber||""})),this.isLoading=!1,this.loginForm.reset(),this.router.navigateByUrl("/")},e=>{this.isLoading=!1,this.error=0===e.status||500===e.status?"Something went wrong. Please try again later.":e.error.message})}onCloseNotification(){this.error=""}}return e.\u0275fac=function(r){return new(r||e)(p.Y36(o.qu),p.Y36(c.yh),p.Y36(m.e),p.Y36(n.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"container"],[1,"active"],["routerLink","/login"],["routerLink","/auth/register"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email","placeholder","email"],["class","error",4,"ngIf"],["formControlName","password","type","password","placeholder","password"],[3,"message","type","closeNotification",4,"ngIf"],["type","submit","value","Login",3,"disabled"],[1,"error"],[3,"message","type","closeNotification"]],template:function(e,r){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"ul"),p.TgZ(2,"li",1),p.TgZ(3,"a",2),p._uU(4,"Login"),p.qZA(),p.qZA(),p.TgZ(5,"li"),p.TgZ(6,"a",3),p._uU(7,"Register"),p.qZA(),p.qZA(),p.qZA(),p.YNc(8,v,1,0,"app-spinner",4),p.YNc(9,F,9,7,"form",5),p.qZA()),2&e&&(p.xp6(8),p.Q6J("ngIf",r.isLoading),p.xp6(1),p.Q6J("ngIf",!r.isLoading))},directives:[n.yS,i.O5,h.O,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,f.c],styles:['.container[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;margin:0 auto;border-bottom:1px solid #db191f;list-style:none;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;width:250px;text-align:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:90px}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";width:250px;height:3px;background:#db191f;position:absolute;left:0;top:32px}form[_ngcontent-%COMP%]{margin:0 auto;width:500px;display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}input[_ngcontent-%COMP%]{flex-basis:100%;margin:20px 0 0}input[type=submit][_ngcontent-%COMP%]{background:#db191f;border:none;border-radius:5px;padding:10px;cursor:pointer;color:#fff;font-size:1.2rem}input[type=submit][_ngcontent-%COMP%]:disabled{background:grey}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{height:2rem;padding:14px}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #db191f}.error[_ngcontent-%COMP%]{color:#db191f}app-notification[_ngcontent-%COMP%]{position:absolute;right:0;top:50px}app-spinner[_ngcontent-%COMP%]{flex-basis:100%}']}),e})();var y=t(5416);function q(e,r){let t=null;return i=>(0,l.of)({}).pipe((0,a.g)(500),(0,u.U)(()=>{t&&(t.unsubscribe(),t=null);const n=e();return n?(t=n.valueChanges.pipe((0,y.R)(r),(0,a.g)(500)).subscribe({next:()=>{i.updateValueAndValidity()},complete:()=>{t=null}}),(null==n?void 0:n.value)===(null==i?void 0:i.value)?null:{sameValue:!0}):null}))}var C=t(5959);function N(e,r){1&e&&p._UZ(0,"app-spinner")}function M(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Email is required! "),p.qZA())}function O(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Email is invalid! "),p.qZA())}function A(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Password is required! "),p.qZA())}function I(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Password must be at least 8 characters long! "),p.qZA())}function J(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Passwords don`t match! "),p.qZA())}function U(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Repeat password is required! "),p.qZA())}function L(e,r){1&e&&(p.TgZ(0,"div",16),p._uU(1," Repeat password must be at least 8 characters long! "),p.qZA())}function T(e,r){if(1&e){const e=p.EpF();p.TgZ(0,"app-notification",17),p.NdJ("closeNotification",function(){return p.CHM(e),p.oxw(2).onCloseNotification()}),p.qZA()}if(2&e){const e=p.oxw(2);p.Q6J("message",e.error)("type","error")}}function k(e,r){if(1&e){const e=p.EpF();p.TgZ(0,"form",6),p.NdJ("ngSubmit",function(){return p.CHM(e),p.oxw().onSubmit()}),p._UZ(1,"input",7),p.YNc(2,M,2,0,"div",8),p.YNc(3,O,2,0,"div",8),p._UZ(4,"input",9),p.YNc(5,A,2,0,"div",8),p.YNc(6,I,2,0,"div",8),p._UZ(7,"input",10),p.YNc(8,J,2,0,"div",8),p.YNc(9,U,2,0,"div",8),p.YNc(10,L,2,0,"div",8),p.TgZ(11,"label",11),p._UZ(12,"input",12),p._uU(13,"I agree with "),p.TgZ(14,"a",13),p._uU(15,"terms and conditions"),p.qZA(),p._uU(16," of PC-World "),p.qZA(),p.YNc(17,T,1,2,"app-notification",14),p._UZ(18,"input",15),p.qZA()}if(2&e){const e=p.oxw();let r,t,i,n,o,s,l;p.Q6J("formGroup",e.registerForm),p.xp6(2),p.Q6J("ngIf",((null==(r=e.registerForm.get("email"))?null:r.touched)||(null==(r=e.registerForm.get("email"))?null:r.dirty))&&(null==(r=e.registerForm.get("email"))||null==r.errors?null:r.errors.required)),p.xp6(1),p.Q6J("ngIf",((null==(t=e.registerForm.get("email"))?null:t.touched)||(null==(t=e.registerForm.get("email"))?null:t.dirty))&&(null==(t=e.registerForm.get("email"))||null==t.errors?null:t.errors.invalidEmail)),p.xp6(2),p.Q6J("ngIf",((null==(i=e.registerForm.get("password"))?null:i.touched)||(null==(i=e.registerForm.get("password"))?null:i.dirty))&&(null==(i=e.registerForm.get("password"))||null==i.errors?null:i.errors.required)),p.xp6(1),p.Q6J("ngIf",((null==(n=e.registerForm.get("password"))?null:n.touched)||(null==(n=e.registerForm.get("password"))?null:n.dirty))&&(null==(n=e.registerForm.get("password"))||null==n.errors?null:n.errors.minLength)),p.xp6(2),p.Q6J("ngIf",((null==(o=e.registerForm.get("rePass"))?null:o.touched)||(null==(o=e.registerForm.get("rePass"))?null:o.dirty))&&(null==(o=e.registerForm.get("rePass"))||null==o.errors?null:o.errors.sameValue)),p.xp6(1),p.Q6J("ngIf",((null==(s=e.registerForm.get("rePass"))?null:s.touched)||(null==(s=e.registerForm.get("rePass"))?null:s.dirty))&&(null==(s=e.registerForm.get("rePass"))||null==s.errors?null:s.errors.required)),p.xp6(1),p.Q6J("ngIf",((null==(l=e.registerForm.get("rePass"))?null:l.touched)||(null==(l=e.registerForm.get("rePass"))?null:l.dirty))&&(null==(l=e.registerForm.get("rePass"))||null==l.errors?null:l.errors.minLength)),p.xp6(7),p.Q6J("ngIf",0!==e.error.length),p.xp6(1),p.Q6J("disabled",e.registerForm.pending)}}const Y=[{path:"",children:[{path:"login",pathMatch:"full",component:Z},{path:"register",component:(()=>{class e{constructor(e,r,t,i){this.fb=e,this.store=r,this.authService=t,this.router=i,this.killSubscription=new C.xQ,this.error="",this.isLoading=!1,this.registerForm=this.fb.group({email:["",[o.kI.required],(0,s.c)()],password:["",[o.kI.required],g(8)],rePass:["",[o.kI.required],q(()=>{var e;return null===(e=this.registerForm)||void 0===e?void 0:e.get("password")},this.killSubscription)],terms:["",[o.kI.required]]})}ngOnDestroy(){this.killSubscription.next(),this.killSubscription.complete()}onSubmit(){var e,r,t,i,n,o,s,l,a;if(this.registerForm.invalid||this.registerForm.pending){let u="";return(null===(e=this.registerForm.get("email"))||void 0===e?void 0:e.hasError("required"))&&(u+="Email is required."),(null===(r=this.registerForm.get("email"))||void 0===r?void 0:r.hasError("invalidEmail"))&&(u+="\nInvalid email."),(null===(t=this.registerForm.get("password"))||void 0===t?void 0:t.hasError("required"))&&(u+="\nPassword is required."),(null===(i=this.registerForm.get("password"))||void 0===i?void 0:i.hasError("minLength"))&&(u+="\nPassword must be at least 8 characters!"),(null===(n=this.registerForm.get("rePass"))||void 0===n?void 0:n.hasError("required"))&&(u+="\nRepeat password is required."),(null===(o=this.registerForm.get("rePass"))||void 0===o?void 0:o.hasError("minLength"))&&(u+="\nRepeat password must be at least 8 characters!"),(null===(s=this.registerForm.get("rePass"))||void 0===s?void 0:s.value)!==(null===(l=this.registerForm.get("password"))||void 0===l?void 0:l.value)&&(u+="\nPasswords don't match!"),(null===(a=this.registerForm.get("terms"))||void 0===a?void 0:a.hasError("required"))&&(u+="\nAgreement is required!"),void(this.error=u)}const u=this.registerForm.value.email,g=this.registerForm.value.password;this.isLoading=!0,this.authService.register({email:u,password:g}).subscribe(e=>{this.store.dispatch((0,d.zU)({_id:e._id,city:e.city||"",email:e.email,isAdmin:e.isAdmin,location:e.location||"",firstName:e.firstName||"",lastName:e.lastName||"",phoneNumber:e.phoneNumber||""})),this.isLoading=!1,this.registerForm.reset(),this.router.navigateByUrl("/")},e=>{this.isLoading=!1,this.error=0===e.status||500===e.status?"Something went wrong. Please try again later.":e.error.message})}onCloseNotification(){this.error=""}}return e.\u0275fac=function(r){return new(r||e)(p.Y36(o.qu),p.Y36(c.yh),p.Y36(m.e),p.Y36(n.F0))},e.\u0275cmp=p.Xpm({type:e,selectors:[["app-register"]],decls:10,vars:2,consts:[[1,"container"],["routerLink","/auth/login"],[1,"active"],["routerLink","/register"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email","name","email","placeholder","email"],["class","error",4,"ngIf"],["formControlName","password","type","password","name","password","placeholder","password"],["formControlName","rePass","type","password","name","rePass","id","rePass","placeholder","repeat password"],["for","terms"],["formControlName","terms","type","checkbox","name","terms","id","terms","required",""],["routerLink","/terms-and-conditions"],[3,"message","type","closeNotification",4,"ngIf"],["type","submit","value","Register",3,"disabled"],[1,"error"],[3,"message","type","closeNotification"]],template:function(e,r){1&e&&(p.TgZ(0,"div",0),p.TgZ(1,"ul"),p.TgZ(2,"li"),p.TgZ(3,"a",1),p._uU(4,"Login"),p.qZA(),p.qZA(),p.TgZ(5,"li",2),p.TgZ(6,"a",3),p._uU(7,"Register"),p.qZA(),p.qZA(),p.qZA(),p.YNc(8,N,1,0,"app-spinner",4),p.YNc(9,k,19,10,"form",5),p.qZA()),2&e&&(p.xp6(8),p.Q6J("ngIf",r.isLoading),p.xp6(1),p.Q6J("ngIf",!r.isLoading))},directives:[n.yS,i.O5,h.O,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Wl,o.Zs,f.c],styles:['.container[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;margin:0 auto;border-bottom:1px solid #db191f;list-style:none;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;width:250px;text-align:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:90px}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";width:250px;height:3px;background:#db191f;position:absolute;left:0;top:32px}form[_ngcontent-%COMP%]{margin:0 auto;width:500px;display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}input[_ngcontent-%COMP%]{flex-basis:100%;margin:20px 0 0}input[type=submit][_ngcontent-%COMP%]{background:#db191f;border:none;border-radius:5px;padding:10px;cursor:pointer;color:#fff;font-size:1.2rem}input[type=submit][_ngcontent-%COMP%]:disabled{background:grey}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{height:2rem;padding:14px}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #db191f}.error[_ngcontent-%COMP%]{color:#db191f}app-notification[_ngcontent-%COMP%]{position:absolute;right:0;top:50px}app-spinner[_ngcontent-%COMP%]{flex-basis:100%}']}),e})()}]}];let E=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[n.Bz.forChild(Y)],n.Bz]}),e})();var Q=t(5425);let S=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=p.oAB({type:e}),e.\u0275inj=p.cJS({imports:[[n.Bz,i.ez,o.UX,E,Q.m]]}),e})()}}]);