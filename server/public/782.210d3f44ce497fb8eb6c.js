(self.webpackChunkpc_world=self.webpackChunkpc_world||[]).push([[782],{5782:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AuthModule:()=>S});var n=r(1116),i=r(6687),o=r(1462),s=r(5806),l=r(878),a=r(509),u=r(9996);function g(e){return t=>(0,l.of)({}).pipe((0,a.g)(1e3),(0,u.U)(()=>t.value.length>=e?null:{minLength:!0}))}var d=r(6068),c=r(5366),p=r(9878),m=r(8845),h=r(3751),f=r(229);function v(e,t){1&e&&c._UZ(0,"app-spinner")}function w(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1," Email is required! "),c.qZA())}function _(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1," Email is invalid! "),c.qZA())}function b(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1," Password is required! "),c.qZA())}function x(e,t){1&e&&(c.TgZ(0,"div",12),c._uU(1," Password must be at least 8 characters long! "),c.qZA())}function P(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"app-notification",13),c.NdJ("closeNotification",function(){return c.CHM(e),c.oxw(2).onCloseNotification()}),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("message",e.error)("type","error")}}function C(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"form",6),c.NdJ("ngSubmit",function(){return c.CHM(e),c.oxw().onSubmit()}),c._UZ(1,"input",7),c.YNc(2,w,2,0,"div",8),c.YNc(3,_,2,0,"div",8),c._UZ(4,"input",9),c.YNc(5,b,2,0,"div",8),c.YNc(6,x,2,0,"div",8),c.YNc(7,P,1,2,"app-notification",10),c._UZ(8,"input",11),c.qZA()}if(2&e){const e=c.oxw();let t,r,n,i;c.Q6J("formGroup",e.loginForm),c.xp6(2),c.Q6J("ngIf",((null==(t=e.loginForm.get("email"))?null:t.touched)||(null==(t=e.loginForm.get("email"))?null:t.dirty))&&(null==(t=e.loginForm.get("email"))||null==t.errors?null:t.errors.required)),c.xp6(1),c.Q6J("ngIf",null==(r=e.loginForm.get("email"))||null==r.errors?null:r.errors.invalidEmail),c.xp6(2),c.Q6J("ngIf",((null==(n=e.loginForm.get("password"))?null:n.touched)||(null==(n=e.loginForm.get("password"))?null:n.dirty))&&(null==(n=e.loginForm.get("password"))||null==n.errors?null:n.errors.required)),c.xp6(1),c.Q6J("ngIf",((null==(i=e.loginForm.get("password"))?null:i.touched)||(null==(i=e.loginForm.get("password"))?null:i.dirty))&&(null==(i=e.loginForm.get("password"))||null==i.errors?null:i.errors.minLength)),c.xp6(1),c.Q6J("ngIf",0!==e.error.length),c.xp6(1),c.Q6J("disabled",e.loginForm.pending)}}let F=(()=>{class e{constructor(e,t,r,n){this.fb=e,this.store=t,this.authService=r,this.router=n,this.error="",this.isLoading=!1,this.loginForm=this.fb.group({email:["",[o.kI.required],(0,s.c)()],password:["",[o.kI.required],g(8)]})}ngOnInit(){}onSubmit(){var e,t,r,n;if(this.loginForm.invalid||this.loginForm.pending){let i="";return(null===(e=this.loginForm.get("email"))||void 0===e?void 0:e.hasError("required"))&&(i+="Email is required."),(null===(t=this.loginForm.get("email"))||void 0===t?void 0:t.hasError("invalidEmail"))&&(i+="\nInvalid email."),(null===(r=this.loginForm.get("password"))||void 0===r?void 0:r.hasError("required"))&&(i+="\nPassword is required."),(null===(n=this.loginForm.get("password"))||void 0===n?void 0:n.hasError("minLength"))&&(i+="\nPassword must be at least 8 characters!"),void(this.error=i)}const i=this.loginForm.value.email,o=this.loginForm.value.password;this.isLoading=!0,this.authService.login({email:i,password:o}).subscribe(e=>{this.store.dispatch((0,d.zU)({_id:e._id,city:e.city||"",email:e.email,isAdmin:e.isAdmin,location:e.location||"",firstName:e.firstName||"",lastName:e.lastName||"",phoneNumber:e.phoneNumber||""})),this.isLoading=!1,this.loginForm.reset(),this.router.navigateByUrl("/")},e=>{this.isLoading=!1,this.error=0===e.status||500===e.status?"Something went wrong. Please try again later.":e.error.message})}onCloseNotification(){this.error=""}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(o.qu),c.Y36(p.yh),c.Y36(m.e),c.Y36(i.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-login"]],decls:10,vars:2,consts:[[1,"container"],[1,"active"],["routerLink","/auth/login"],["routerLink","/auth/register"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email","placeholder","email"],["class","error",4,"ngIf"],["formControlName","password","type","password","placeholder","password"],[3,"message","type","closeNotification",4,"ngIf"],["type","submit","value","Login",3,"disabled"],[1,"error"],[3,"message","type","closeNotification"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"ul"),c.TgZ(2,"li",1),c.TgZ(3,"a",2),c._uU(4,"Login"),c.qZA(),c.qZA(),c.TgZ(5,"li"),c.TgZ(6,"a",3),c._uU(7,"Register"),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,v,1,0,"app-spinner",4),c.YNc(9,C,9,7,"form",5),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngIf",t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading))},directives:[i.yS,n.O5,h.O,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,f.c],styles:['.container[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;margin:0 auto;border-bottom:1px solid #db191f;list-style:none;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;width:250px;text-align:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:90px}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";width:250px;height:3px;background:#db191f;position:absolute;left:0;top:32px}form[_ngcontent-%COMP%]{margin:0 auto;width:500px;display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}input[_ngcontent-%COMP%]{flex-basis:100%;margin:20px 0 0}input[type=submit][_ngcontent-%COMP%]{background:#db191f;border:none;border-radius:5px;padding:10px;cursor:pointer;color:#fff;font-size:1.2rem}input[type=submit][_ngcontent-%COMP%]:disabled{background:grey}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{height:2rem;padding:14px}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #db191f}.error[_ngcontent-%COMP%]{color:#db191f}app-notification[_ngcontent-%COMP%]{position:absolute;right:0;top:50px}app-spinner[_ngcontent-%COMP%]{flex-basis:100%}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{width:180px;left:-10px}app-notification[_ngcontent-%COMP%]{position:unset;width:95%}}']}),e})();var Z=r(5416);function y(e,t){let r=null;return n=>(0,l.of)({}).pipe((0,a.g)(500),(0,u.U)(()=>{r&&(r.unsubscribe(),r=null);const i=e();return i?(r=i.valueChanges.pipe((0,Z.R)(t),(0,a.g)(500)).subscribe({next:()=>{n.updateValueAndValidity()},complete:()=>{r=null}}),(null==i?void 0:i.value)===(null==n?void 0:n.value)?null:{sameValue:!0}):null}))}var q=r(5959);function M(e,t){1&e&&c._UZ(0,"app-spinner")}function O(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Email is required! "),c.qZA())}function N(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Email is invalid! "),c.qZA())}function A(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Password is required! "),c.qZA())}function I(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Password must be at least 8 characters long! "),c.qZA())}function J(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Passwords don`t match! "),c.qZA())}function U(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Repeat password is required! "),c.qZA())}function L(e,t){1&e&&(c.TgZ(0,"div",16),c._uU(1," Repeat password must be at least 8 characters long! "),c.qZA())}function T(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"app-notification",17),c.NdJ("closeNotification",function(){return c.CHM(e),c.oxw(2).onCloseNotification()}),c.qZA()}if(2&e){const e=c.oxw(2);c.Q6J("message",e.error)("type","error")}}function k(e,t){if(1&e){const e=c.EpF();c.TgZ(0,"form",6),c.NdJ("ngSubmit",function(){return c.CHM(e),c.oxw().onSubmit()}),c._UZ(1,"input",7),c.YNc(2,O,2,0,"div",8),c.YNc(3,N,2,0,"div",8),c._UZ(4,"input",9),c.YNc(5,A,2,0,"div",8),c.YNc(6,I,2,0,"div",8),c._UZ(7,"input",10),c.YNc(8,J,2,0,"div",8),c.YNc(9,U,2,0,"div",8),c.YNc(10,L,2,0,"div",8),c.TgZ(11,"label",11),c._UZ(12,"input",12),c._uU(13,"I agree with "),c.TgZ(14,"a",13),c._uU(15,"terms and conditions"),c.qZA(),c._uU(16," of PC-World "),c.qZA(),c.YNc(17,T,1,2,"app-notification",14),c._UZ(18,"input",15),c.qZA()}if(2&e){const e=c.oxw();let t,r,n,i,o,s,l;c.Q6J("formGroup",e.registerForm),c.xp6(2),c.Q6J("ngIf",((null==(t=e.registerForm.get("email"))?null:t.touched)||(null==(t=e.registerForm.get("email"))?null:t.dirty))&&(null==(t=e.registerForm.get("email"))||null==t.errors?null:t.errors.required)),c.xp6(1),c.Q6J("ngIf",((null==(r=e.registerForm.get("email"))?null:r.touched)||(null==(r=e.registerForm.get("email"))?null:r.dirty))&&(null==(r=e.registerForm.get("email"))||null==r.errors?null:r.errors.invalidEmail)),c.xp6(2),c.Q6J("ngIf",((null==(n=e.registerForm.get("password"))?null:n.touched)||(null==(n=e.registerForm.get("password"))?null:n.dirty))&&(null==(n=e.registerForm.get("password"))||null==n.errors?null:n.errors.required)),c.xp6(1),c.Q6J("ngIf",((null==(i=e.registerForm.get("password"))?null:i.touched)||(null==(i=e.registerForm.get("password"))?null:i.dirty))&&(null==(i=e.registerForm.get("password"))||null==i.errors?null:i.errors.minLength)),c.xp6(2),c.Q6J("ngIf",((null==(o=e.registerForm.get("rePass"))?null:o.touched)||(null==(o=e.registerForm.get("rePass"))?null:o.dirty))&&(null==(o=e.registerForm.get("rePass"))||null==o.errors?null:o.errors.sameValue)),c.xp6(1),c.Q6J("ngIf",((null==(s=e.registerForm.get("rePass"))?null:s.touched)||(null==(s=e.registerForm.get("rePass"))?null:s.dirty))&&(null==(s=e.registerForm.get("rePass"))||null==s.errors?null:s.errors.required)),c.xp6(1),c.Q6J("ngIf",((null==(l=e.registerForm.get("rePass"))?null:l.touched)||(null==(l=e.registerForm.get("rePass"))?null:l.dirty))&&(null==(l=e.registerForm.get("rePass"))||null==l.errors?null:l.errors.minLength)),c.xp6(7),c.Q6J("ngIf",0!==e.error.length),c.xp6(1),c.Q6J("disabled",e.registerForm.pending)}}const Y=[{path:"",children:[{path:"login",pathMatch:"full",component:F},{path:"register",component:(()=>{class e{constructor(e,t,r,n){this.fb=e,this.store=t,this.authService=r,this.router=n,this.killSubscription=new q.xQ,this.error="",this.isLoading=!1,this.registerForm=this.fb.group({email:["",[o.kI.required],(0,s.c)()],password:["",[o.kI.required],g(8)],rePass:["",[o.kI.required],y(()=>{var e;return null===(e=this.registerForm)||void 0===e?void 0:e.get("password")},this.killSubscription)],terms:["",[o.kI.required]]})}ngOnDestroy(){this.killSubscription.next(),this.killSubscription.complete()}onSubmit(){var e,t,r,n,i,o,s,l,a;if(this.registerForm.invalid||this.registerForm.pending){let u="";return(null===(e=this.registerForm.get("email"))||void 0===e?void 0:e.hasError("required"))&&(u+="Email is required."),(null===(t=this.registerForm.get("email"))||void 0===t?void 0:t.hasError("invalidEmail"))&&(u+="\nInvalid email."),(null===(r=this.registerForm.get("password"))||void 0===r?void 0:r.hasError("required"))&&(u+="\nPassword is required."),(null===(n=this.registerForm.get("password"))||void 0===n?void 0:n.hasError("minLength"))&&(u+="\nPassword must be at least 8 characters!"),(null===(i=this.registerForm.get("rePass"))||void 0===i?void 0:i.hasError("required"))&&(u+="\nRepeat password is required."),(null===(o=this.registerForm.get("rePass"))||void 0===o?void 0:o.hasError("minLength"))&&(u+="\nRepeat password must be at least 8 characters!"),(null===(s=this.registerForm.get("rePass"))||void 0===s?void 0:s.value)!==(null===(l=this.registerForm.get("password"))||void 0===l?void 0:l.value)&&(u+="\nPasswords don't match!"),(null===(a=this.registerForm.get("terms"))||void 0===a?void 0:a.hasError("required"))&&(u+="\nAgreement is required!"),void(this.error=u)}const u=this.registerForm.value.email,g=this.registerForm.value.password;this.isLoading=!0,this.authService.register({email:u,password:g}).subscribe(e=>{this.store.dispatch((0,d.zU)({_id:e._id,city:e.city||"",email:e.email,isAdmin:e.isAdmin,location:e.location||"",firstName:e.firstName||"",lastName:e.lastName||"",phoneNumber:e.phoneNumber||""})),this.isLoading=!1,this.registerForm.reset(),this.router.navigateByUrl("/")},e=>{this.isLoading=!1,this.error=0===e.status||500===e.status?"Something went wrong. Please try again later.":e.error.message})}onCloseNotification(){this.error=""}}return e.\u0275fac=function(t){return new(t||e)(c.Y36(o.qu),c.Y36(p.yh),c.Y36(m.e),c.Y36(i.F0))},e.\u0275cmp=c.Xpm({type:e,selectors:[["app-register"]],decls:10,vars:2,consts:[[1,"container"],["routerLink","/auth/login"],[1,"active"],["routerLink","/auth/register"],[4,"ngIf"],[3,"formGroup","ngSubmit",4,"ngIf"],[3,"formGroup","ngSubmit"],["formControlName","email","type","email","name","email","placeholder","email"],["class","error",4,"ngIf"],["formControlName","password","type","password","name","password","placeholder","password"],["formControlName","rePass","type","password","name","rePass","id","rePass","placeholder","repeat password"],["for","terms"],["formControlName","terms","type","checkbox","name","terms","id","terms","required",""],["routerLink","/terms-and-conditions"],[3,"message","type","closeNotification",4,"ngIf"],["type","submit","value","Register",3,"disabled"],[1,"error"],[3,"message","type","closeNotification"]],template:function(e,t){1&e&&(c.TgZ(0,"div",0),c.TgZ(1,"ul"),c.TgZ(2,"li"),c.TgZ(3,"a",1),c._uU(4,"Login"),c.qZA(),c.qZA(),c.TgZ(5,"li",2),c.TgZ(6,"a",3),c._uU(7,"Register"),c.qZA(),c.qZA(),c.qZA(),c.YNc(8,M,1,0,"app-spinner",4),c.YNc(9,k,19,10,"form",5),c.qZA()),2&e&&(c.xp6(8),c.Q6J("ngIf",t.isLoading),c.xp6(1),c.Q6J("ngIf",!t.isLoading))},directives:[i.yS,n.O5,h.O,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.Wl,o.Zs,f.c],styles:['.container[_ngcontent-%COMP%]{position:relative}ul[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;margin:0 auto;border-bottom:1px solid #db191f;list-style:none;padding:10px}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;width:250px;text-align:center}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#000;margin:90px}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{content:"";width:250px;height:3px;background:#db191f;position:absolute;left:0;top:32px}form[_ngcontent-%COMP%]{margin:0 auto;width:500px;display:flex;align-items:center;justify-content:flex-start;flex-wrap:wrap}input[_ngcontent-%COMP%]{flex-basis:100%;margin:20px 0 0}input[type=submit][_ngcontent-%COMP%]{background:#db191f;border:none;border-radius:5px;padding:10px;cursor:pointer;color:#fff;font-size:1.2rem}input[type=submit][_ngcontent-%COMP%]:disabled{background:grey}input[type=checkbox][_ngcontent-%COMP%]{margin-right:10px}label[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000}input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{height:2rem;padding:14px}input.ng-touched.ng-invalid[_ngcontent-%COMP%]{border:1px solid #db191f}.error[_ngcontent-%COMP%]{color:#db191f}app-notification[_ngcontent-%COMP%]{position:absolute;right:0;top:50px}app-spinner[_ngcontent-%COMP%]{flex-basis:100%}@media (max-width:767.98px){ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0}ul[_ngcontent-%COMP%]   li.active[_ngcontent-%COMP%]:after{width:180px;left:-2px}app-notification[_ngcontent-%COMP%]{position:unset;width:95%}}']}),e})()}]}];let E=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.Bz.forChild(Y)],i.Bz]}),e})();var Q=r(5425);let S=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=c.oAB({type:e}),e.\u0275inj=c.cJS({imports:[[i.Bz,n.ez,o.UX,E,Q.m]]}),e})()}}]);